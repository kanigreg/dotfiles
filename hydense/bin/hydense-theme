#!/bin/bash

help() {
  cat <<EOF
Manage color themes

Usage:
  theme <command> [arguments]

Commands:
  ls                 List all available themes.
  set <name>         Apply the specified theme.
  help               Show this help message.

Examples:
  theme ls
      Lists all available themes.

  theme set catppuccin
      Applies the "catppuccin" theme.

  theme help
      Shows this help screen.

Notes:
  - Commands are case-sensitive.
  - Themes must exist in the themes directory.

EOF
}

ls() {
  find ~/.config/hydense/themes/ -mindepth 1 -maxdepth 1 \( -type d -o -type l \) | sort | while read -r path; do
    basename "$path"
  done
}

set() {
  local theme_path=~/.config/hydense/themes/"$1"
  if [[ -d "$theme_path" || -L "$theme_path" ]]; then
    ln -snf "$theme_path" ~/.config/hydense/current/theme
  else
    echo "Theme '$1' not found"
  fi

  bat cache --build
}

case $1 in
ls) ls ;;
set) set "$2" ;;
*) help ;;
esac
